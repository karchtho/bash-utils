# Configuration spécifique pour l'environnement PRODUCTION
# ========================================================

# Modules PHP minimaux pour la production
ENVIRONMENT_PHP_MODULES="php-json php-xml"

# Configuration PHP.ini pour la production
ENVIRONMENT_PHP_CONFIG="
; Configuration PHP pour PRODUCTION
error_reporting = E_ERROR & ~E_DEPRECATED & ~E_STRICT
display_errors = Off
display_startup_errors = Off
log_errors = On
log_errors_max_len = 1024
error_log = /var/log/php_errors.log

; Pas de debug en production
html_errors = Off

; Limites optimisées pour la production
memory_limit = 128M
max_execution_time = 30
max_input_time = 60
post_max_size = 16M
upload_max_filesize = 16M

; Session sécurisée pour la production
session.cookie_secure = On
session.cookie_httponly = On
session.use_strict_mode = 1
session.cookie_samesite = Strict

; OPcache optimisé pour la production
opcache.enable = 1
opcache.enable_cli = 0
opcache.memory_consumption = 256
opcache.interned_strings_buffer = 64
opcache.max_accelerated_files = 10000
opcache.revalidate_freq = 0
opcache.validate_timestamps = 0
opcache.save_comments = 0
opcache.fast_shutdown = 1

; Sécurité renforcée
expose_php = Off
allow_url_fopen = Off
allow_url_include = Off
"

# Outils minimaux pour la production
ENVIRONMENT_TOOLS="git"

# Pas de Xdebug en production
ENVIRONMENT_XDEBUG_CONFIG=""

# Configuration Apache pour production
ENVIRONMENT_APACHE_CONFIG="
# Configuration Apache pour production
ServerTokens Prod
ServerSignature Off
LogLevel error

# Sécurité renforcée
Header always set X-Content-Type-Options nosniff
Header always set X-Frame-Options DENY
Header always set X-XSS-Protection \"1; mode=block\"
Header always set Strict-Transport-Security \"max-age=31536000; includeSubDomains\"
Header always set Referrer-Policy \"strict-origin-when-cross-origin\"
"

# Configuration MySQL pour production
ENVIRONMENT_MYSQL_CONFIG="
# Configuration MySQL pour production
general_log = 0
slow_query_log = 1
slow_query_log_file = /var/log/mysql/slow.log
long_query_time = 5

# Optimisations pour la production
innodb_buffer_pool_size = 256M
innodb_log_file_size = 64M
innodb_flush_log_at_trx_commit = 1
"